= Deploy and manage services
:page-supergroup-console-cli: Interface

include::ROOT:partial$include.adoc[]

This guide will walk you through deploying Akka services using the Akka Console and the Akka CLI. By the end, youâ€™ll be able to deploy, check the status, update, and remove services.

== Prerequisites

Before deploying a service, ensure you have the following:

* An https://console.akka.io/register[Akka account]
* An xref:operations:projects/create-project.adoc[Akka project created]
* The xref:akka-cli:installation.adoc[Akka CLI installed] (optional)
* A container image ready for deployment

ifdef::todo[TODO:  We lack docs about building and pushing the container image! https://github.com/lightbend/kalix/issues/11832]
== Deploying a service

Services can be deployed via the Akka Console or with the Akka CLI.

[.tabset]
--
Akka Console::
+
To deploy your service via the Akka Console:

. Open the https://console.akka.io[*Akka Console*, window="new"].
. Select the Project card of the Project the Service should belong to.
. Click the *Deploy a service* button
image:console-deploy-service-button.png[]
. In the dialog that appears, specify the desired Service name and paste the container URI including the correct tag (e.g. `my-container-uri/container-name:tag-name`) to set the Service image
image:console-deploy-service-dialog.png[]
+
Akka CLI::
+
To deploy your service, use the following command. Replace `my-service` with your service name and update the container URI and tag accordingly:
+
[source, command line]
----
akka service deploy my-service my-container-uri/container-name:tag-name
----
+
Your service will now begin deploying.
+
TIP: To combine deploying a service with relevant settings, Akka supports deploying with service descriptors (xref:#apply[see below]).
--

[#_verify_service_status]
== Checking service status

You can verify the deployment status of your service in the Akka Console or with the Akka CLI:

ifdef::todo[TODO:  Image of new Console, review description]
[.tabset]
--
Akka Console::
+
1. Open the https://console.akka.io[*Akka Console*, window="new"].
2. Navigate to the *Project* where the Service is deployed.
3. Look for the *Service* card of the Service, it shows the status.
+
ifdef::todo[TODO:  image for service card image::console-service-card.png[Service card]]+
A service status can be one of the following:

* *Ready*: All service instances are up-to-date and fully available.
* *Update In Progress*: Service is updating.
* *Unavailable*: No service instances are available.
* *Partially Ready*: Some, but not all, service instances are available.
+
Akka CLI::
+
Verify the service status from the command line with this command:
+
[source, command line]
----
akka service list
----
+
A service status can be one of the following:

* *Ready*: All service instances are up-to-date and fully available.
* *UpdateInProgress*: Service is updating.
* *Unavailable*: No service instances are available.
* *PartiallyReady*: Some, but not all, service instances are available.
--

== How to update a deployed service

If you need to update your service with a new container image:

1. *Make changes* to your service and *package them* into a *new container image*.
2. *Tag your new image* with an updated version (e.g., `tag-name-2`).
3. *Deploy the updated image* by passing the new tag:
+
[source, command line]
----
akka service deploy my-service my-container-uri/container-name:tag-name-2
----

Akka will perform a rolling update, replacing old instances with new ones without downtime.

[#apply]
== Using service descriptors

Akka services can also be described and managed with *YAML service descriptors*. For example:

[source, yaml]
----
name: my-service
spec:
  image: my-container-uri/container-name:tag-name
  env:
  - name: SOME_VARIABLE
    value: some value
----

To apply this descriptor, run:

[source, command line]
----
akka service apply -f my-service.yaml
----

You can also export an existing service's descriptor for reference or editing:
[source, command line]
----
akka service export my-service -f my-service.yaml
----

=== Redeploying with a descriptor

After editing the service descriptor (e.g., `my-service.yaml`), redeploy it with:

[source, command line]
----
akka service apply -f my-service.yaml
----

== Removing a deployed service

To delete a service and free its resources, run the following command, replacing `my-service` with the name of the service you want to remove:

[source, command line]
----
akka service delete my-service
----

The service will be deleted, and its resources will be freed.

[NOTE]
--
During development, with changing domain models, it may be useful to delete a service _including its data_. To delete already stored data and the service, use the `--hard` flag. *This can not be undone.*

[source, command line]
----
akka service delete my-service --hard
----

--

== Conclusion

You now know how to deploy, verify, update, and remove Akka services using the Akka CLI. Continue experimenting with different configurations and commands to further enhance your services.

== Related documentation

- xref:reference:akka-cli/akka_services.adoc[`akka service` CLI commands]
